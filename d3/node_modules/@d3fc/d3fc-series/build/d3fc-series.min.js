(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@d3fc/d3fc-data-join"),require("d3-shape"),require("d3-selection"),require("@d3fc/d3fc-rebind"),require("d3-scale"),require("@d3fc/d3fc-webgl"),require("@d3fc/d3fc-shape"),require("d3-array")):"function"==typeof define&&define.amd?define(["exports","@d3fc/d3fc-data-join","d3-shape","d3-selection","@d3fc/d3fc-rebind","d3-scale","@d3fc/d3fc-webgl","@d3fc/d3fc-shape","d3-array"],t):(e=e||self,t(e.fc=e.fc||{},e.fc,e.d3,e.d3,e.fc,e.d3,e.fc,e.fc,e.d3))})(this,function(e,t,a,l,i,n,r,d,c){'use strict';function s(){var e=arguments;return function(t,a){for(var l=0,i=e.length;l<i;l++)if(null==e[l](t,a))return!1;return!0}}function o(e){return h(e)||g(e)||u()}function h(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function g(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var b=function(e){return"function"==typeof e?e:function(){return e}},p=function(e,t){return"left"===e?t/2:"right"===e?-t/2:0},w=function(e){var t=Object.assign({},e),a=function(){};return Object.keys(t).forEach(function(e){a[e]=function(){return arguments.length?(t[e]=0>=arguments.length?void 0:arguments[0],a):t[e]}}),a},f=function(){var e=function(){return 0},t=function(e){return e.x},a=function(e){return e.y},l="center",r=function(){return 5},c="vertical",o=w({decorate:function(){},defined:function(l,n){return s(e,t,a)(l,n)},xScale:n.scaleIdentity(),yScale:n.scaleIdentity()});return o.values=function(n,d){var i=r(n,d),s=p(l,i),h=o.xScale(),g=o.yScale();if("vertical"===c){var u=g(a(n,d),d),b=g(e(n,d),d),w=h(t(n,d),d)+s;return{d:n,x:w,y:u,y0:b,width:i,height:u-b,origin:[w,u],baseOrigin:[w,b],transposedX:w,transposedY:u}}var f=h(a(n,d),d),S=h(e(n,d),d),y=g(t(n,d),d)+s;return{d:n,x:y,y:f,y0:S,width:i,height:f-S,origin:[f,y],baseOrigin:[S,y],transposedX:f,transposedY:y}},o.xValues=function(){return"vertical"===c?[t]:[e,a]},o.yValues=function(){return"vertical"===c?[e,a]:[t]},o.baseValue=function(){return arguments.length?(e=b(0>=arguments.length?void 0:arguments[0]),o):e},o.crossValue=function(){return arguments.length?(t=b(0>=arguments.length?void 0:arguments[0]),o):t},o.mainValue=function(){return arguments.length?(a=b(0>=arguments.length?void 0:arguments[0]),o):a},o.bandwidth=function(){return arguments.length?(r=b(0>=arguments.length?void 0:arguments[0]),o):r},o.align=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],o):l},o.orient=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],o):c},o},S={red:"#c60",green:"#6c0",black:"#000",gray:"#ddd",darkGray:"#999"},y=function(){var e=f(),n=a.line().x(function(t,a){return e.values(t,a).transposedX}).y(function(t,a){return e.values(t,a).transposedY}),r=t.dataJoin("path","line"),d=function(t){t.selection&&r.transition(t),n.defined(e.defined()),t.each(function(t,a,i){var d=r(l.select(i[a]),[t]);d.enter().attr("fill","none").attr("stroke",S.black),d.attr("d",n),e.decorate()(d,t,a)})};return i.rebindAll(d,e,i.exclude("baseValue","bandwidth","align")),i.rebind(d,r,"key"),i.rebind(d,n,"curve"),d},x=function(){var e=f(),t=a.line().x(function(t,a){return e.values(t,a).transposedX}).y(function(t,a){return e.values(t,a).transposedY}),l=function(a){var l=t.context();l.beginPath(),l.strokeStyle=S.black,l.fillStyle="transparent",e.decorate()(l,a),t.defined(e.defined())(a),l.fill(),l.stroke(),l.closePath()};return i.rebindAll(l,e,i.exclude("baseValue","bandwidth","align")),i.rebind(l,t,"curve","context"),l},v=function(){var e=function(e){return e.high},t=function(e){return e.low},a=function(e){return e.cross},l="vertical",r="center",c=function(){return 5},o=w({decorate:function(){},defined:function(l,n){return s(t,e,a)(l,n)},xScale:n.scaleIdentity(),yScale:n.scaleIdentity()});return o.values=function(n,d){var i=c(n,d),s=p(r,i),h=o.xScale(),g=o.yScale();if("vertical"===l){var u=g(e(n,d));return{origin:[h(a(n,d))+s,u],high:0,low:g(t(n,d))-u,width:i}}var b=h(t(n,d));return{origin:[b,g(a(n,d))+s],high:h(e(n,d))-b,low:0,width:i}},o.xValues=function(){return"vertical"===l?[a]:[e,t]},o.yValues=function(){return"vertical"===l?[e,t]:[a]},o.orient=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],o):l},o.lowValue=function(){return arguments.length?(t=b(0>=arguments.length?void 0:arguments[0]),o):t},o.highValue=function(){return arguments.length?(e=b(0>=arguments.length?void 0:arguments[0]),o):e},o.crossValue=function(){return arguments.length?(a=b(0>=arguments.length?void 0:arguments[0]),o):a},o.bandwidth=function(){return arguments.length?(c=b(0>=arguments.length?void 0:arguments[0]),o):c},o.align=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],o):r},o},A=function(){var e,t=function(e){return e.date},a=function(e){return e.open},l=function(e){return e.high},r=function(e){return e.low},c=function(e){return e.close},o=function(){return 5},h="center",g=function(a,l){return e.xScale()(t(a,l))};return e=w({decorate:function(){},defined:function(e,n){return s(t,a,r,l,c)(e,n)},xScale:n.scaleIdentity(),yScale:n.scaleIdentity()}),e.values=function(t,n){var i=c(t,n),d=a(t,n),s=o(t,n),u=p(h,s),b="";return i>d?b="up":i<d&&(b="down"),{cross:g(t,n)+u,open:e.yScale()(d),high:e.yScale()(l(t,n)),low:e.yScale()(r(t,n)),close:e.yScale()(i),width:s,direction:b}},e.xValues=function(){return[t]},e.yValues=function(){return[a,l,r,c]},e.crossValue=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],e):t},e.openValue=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],e):a},e.highValue=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],e):l},e.lowValue=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],e):r},e.yValue=e.closeValue=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],e):c},e.bandwidth=function(){return arguments.length?(o=b(0>=arguments.length?void 0:arguments[0]),e):o},e.align=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],e):h},e},m=function(e,a){var n=A(),r=t.dataJoin("g",a),c=function(e){return"translate("+e.cross+", "+e.high+")"},s=function(e){return function(t){return e.selection?t.transition(e):t}},o=function(t){t.selection&&r.transition(t);var o=s(t);t.each(function(t,i,d){var s=t.filter(n.defined()),h=r(l.select(d[i]),s);h.enter().attr("transform",function(e,t){return c(n.values(e,t))+" scale(1e-6, 1)"}).append("path"),h.each(function(t,r,i){var d=n.values(t,r),s="up"===d.direction?S.green:S.red,h=o(l.select(i[r])).attr("class",a+" "+d.direction).attr("stroke",s).attr("fill",s).attr("transform",function(){return c(d)+" scale(1)"});e.x(0).width(d.width).open(function(){return d.open-d.high}).high(0).low(function(){return d.low-d.high}).close(function(){return d.close-d.high}),h.select("path").attr("d",e([t]))}),n.decorate()(h,t,i)})};return i.rebind(o,r,"key"),i.rebindAll(o,n),o},V=function(e){var t=A(),a=function(a){var l=a.filter(t.defined()),n=e.context();l.forEach(function(a,l){n.save();var i=t.values(a,l);n.translate(i.cross,i.high),n.beginPath(),e.x(0).open(function(){return i.open-i.high}).width(i.width).high(0).low(function(){return i.low-i.high}).close(function(){return i.close-i.high})([a]);var r="up"===i.direction?S.green:S.red;n.strokeStyle=r,n.fillStyle=r,t.decorate()(n,a,l),n.fill(),n.stroke(),n.closePath(),n.restore()})};return i.rebind(a,e,"context"),i.rebindAll(a,t),a},E=function(e){var t=A(),a=r.webglElementAttribute(),l=r.webglElementAttribute(),n=r.webglElementAttribute(),d=r.webglElementAttribute(),c=r.webglElementAttribute(),s=r.webglElementAttribute().type(r.webglTypes.UNSIGNED_SHORT),o=r.webglElementAttribute().type(r.webglTypes.UNSIGNED_BYTE);e.crossValueAttribute(a).openValueAttribute(l).highValueAttribute(n).lowValueAttribute(d).closeValueAttribute(c).bandwidthAttribute(s).definedAttribute(o);var h=function(){return!1},g=r.webglScaleMapper,u=[],b=null,p=null,w=function(i){var r=g(t.xScale()),w=g(t.yScale()),f=!h(u,i);f&&(u=i,s.value(function(e,a){return t.bandwidth()(e,a)}).data(i),o.value(function(e,a){return t.defined()(e,a)}).data(i)),(f||r.scale!==b)&&(b=r.scale,a.value(function(e,a){return r.scale(t.crossValue()(e,a))}).data(i)),(f||w.scale!==p)&&(p=w.scale,l.value(function(e,a){return w.scale(t.openValue()(e,a))}).data(i),n.value(function(e,a){return w.scale(t.highValue()(e,a))}).data(i),d.value(function(e,a){return w.scale(t.lowValue()(e,a))}).data(i),c.value(function(e,a){return w.scale(t.closeValue()(e,a))}).data(i)),e.xScale(r.webglScale).yScale(w.webglScale).decorate(function(e){return t.decorate()(e,i,0)}),e(i.length)};return w.equals=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],w):h},w.scaleMapper=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],w):g},i.rebindAll(w,t,i.exclude("align")),i.rebind(w,e,"context","lineWidth"),w},k=function(){var e=function(e){return e.upperQuartile},t=function(e){return e.lowerQuartile},a=function(e){return e.high},l=function(e){return e.low},r=function(e){return e.value},c=function(e){return e.median},o="vertical",h="center",g=function(){return 5},u=w({decorate:function(){},defined:function(n,d){return s(l,a,t,e,r,c)(n,d)},xScale:n.scaleIdentity(),yScale:n.scaleIdentity()});return u.values=function(n,d){var i=g(n,d),s=p(h,i),b=u.xScale(),w=u.yScale();if("vertical"===o){var f=w(a(n,d));return{origin:[b(r(n,d))+s,f],high:0,upperQuartile:w(e(n,d))-f,median:w(c(n,d))-f,lowerQuartile:w(t(n,d))-f,low:w(l(n,d))-f,width:i}}var S=b(l(n,d));return{origin:[S,w(r(n,d))+s],high:b(a(n,d))-S,upperQuartile:b(e(n,d))-S,median:b(c(n,d))-S,lowerQuartile:b(t(n,d))-S,low:0,width:i}},u.xValues=function(){return"vertical"===o?[r]:[e,t,a,l,c]},u.yValues=function(){return"vertical"===o?[e,t,a,l,c]:[r]},u.orient=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],u):o},u.lowerQuartileValue=function(){return arguments.length?(t=b(0>=arguments.length?void 0:arguments[0]),u):t},u.upperQuartileValue=function(){return arguments.length?(e=b(0>=arguments.length?void 0:arguments[0]),u):e},u.lowValue=function(){return arguments.length?(l=b(0>=arguments.length?void 0:arguments[0]),u):l},u.highValue=function(){return arguments.length?(a=b(0>=arguments.length?void 0:arguments[0]),u):a},u.crossValue=function(){return arguments.length?(r=b(0>=arguments.length?void 0:arguments[0]),u):r},u.medianValue=function(){return arguments.length?(c=b(0>=arguments.length?void 0:arguments[0]),u):c},u.bandwidth=function(){return arguments.length?(g=b(0>=arguments.length?void 0:arguments[0]),u):g},u.align=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],u):h},u},N=function(){var e=[],t=function(e){return e},a=function(e,t){return t},l=w({decorate:function(){},xScale:n.scaleIdentity(),yScale:n.scaleIdentity()});return l.xValues=function(){return e.map(function(e){return e.xValues()}).reduce(function(e,t){return e.concat(t)})},l.yValues=function(){return e.map(function(e){return e.yValues()}).reduce(function(e,t){return e.concat(t)})},l.mapping=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.key=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},l.series=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l},B=function(){var e=N(),a=t.dataJoin("g"),n=t.dataJoin("g","multi"),r=function(t){t.selection&&(n.transition(t),a.transition(t));var i=e.mapping(),r=e.series(),d=e.xScale(),c=e.yScale();t.each(function(t,s,o){var h=n(l.select(o[s]),r);h.each(function(e,n,s){e.xScale(d).yScale(c);var o=i(t,n,r),h=a(l.select(s[n]),[o]);h.call(e)});var g=h.selection?h.selection():h;g.order(),e.decorate()(h,t,s)})};return i.rebindAll(r,e),i.rebind(r,n,"key"),r},I=function(){var e=null,t=N(),a=function(a){var l=t.mapping(),i=t.series(),n=t.xScale(),r=t.yScale();i.forEach(function(d,s){var o=l(a,s,i);d.context(e).xScale(n).yScale(r);var h;d.decorate?(h=d.decorate(),d.decorate(function(e,l,n){t.decorate()(e,a,s),h(e,l,n)})):t.decorate()(e,a,s),d(o),h&&d.decorate(h)})};return a.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],a):e},i.rebindAll(a,t),a},P=function(){var e=function(){return 50},t="center",a=n.scaleBand(),l=w({decorate:function(){},xScale:n.scaleLinear(),yScale:n.scaleLinear()});return l.offsetScaleForDatum=function(l,n,r){var i=e(n,r),d=p(t,i),s=i/2;return a.domain(c.range(0,l.length)).range([-s+d,s+d])},l.bandwidth=function(){return arguments.length?(e=b(0>=arguments.length?void 0:arguments[0]),l):e},l.align=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},i.rebindAll(l,a,i.includeMap({paddingInner:"paddingOuter"})),l},T=function(){var e="vertical",t=x(),a=I(),l=function(l){"vertical"===e?a.series(l[0].map(function(){return t})).mapping(function(e,t){return e.map(function(e){return e[t]})}):a.series(l.map(function(){return t})).mapping(function(e,t){return e[t]}),a(l)};return l.series=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},i.rebindAll(l,a,i.exclude("series","mapping")),l},G=function(e){return e.sort(c.ascending).filter(function(e,t,a){return-1===a.indexOf(e,t+1)})},M=function(){var e=function(e){return e.x},t=function(e){return e.y},a=function(e){return e.color},l=function(){return 5},r=function(){return 5},o=n.interpolateViridis,h=w({decorate:function(){},defined:function(l,n){return s(e,t,a)(l,n)},xScale:n.scaleIdentity(),yScale:n.scaleIdentity()});return h.pathGenerator=d.shapeBar().x(0).y(0),h.colorScale=function(e){var t=e.map(a);return n.scaleLinear().domain([c.min(t),c.max(t)])},h.values=function(n,d){return{x:h.xScale()(e(n,d)),y:h.yScale()(t(n,d)),colorValue:a(n,d),width:r(n,d),height:l(n,d)}},h.xValues=function(){return[e]},h.yValues=function(){return[t]},h.xValue=function(){return arguments.length?(e=b(0>=arguments.length?void 0:arguments[0]),h):e},h.yValue=function(){return arguments.length?(t=b(0>=arguments.length?void 0:arguments[0]),h):t},h.colorValue=function(){return arguments.length?(a=b(0>=arguments.length?void 0:arguments[0]),h):a},h.colorInterpolate=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],h):o},h.xBandwidth=function(){return arguments.length?(r=b(0>=arguments.length?void 0:arguments[0]),h):r},h.yBandwidth=function(){return arguments.length?(l=b(0>=arguments.length?void 0:arguments[0]),h):l},i.rebindAll(h,h.pathGenerator,i.includeMap({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),h};e.autoBandwidth=function(e){var t=.75,a=function(e){if(1>=e.length)return 10;e=G(e);var a=c.pairs(e).map(function(e){var t=Math.abs;return t(e[0]-e[1])}),l=c.min(a);return t*l},n=function(t,l,i){if(t.bandwidth)return t.bandwidth();var n,r=Array.isArray(l)?(n=[]).concat.apply(n,o(l)):l,d=r.filter(e.defined()).map(i()).map(t),c=a(d);return c},r=function(t){var a=function(t){if(e.xBandwidth&&e.yBandwidth)e.xBandwidth(n(e.xScale(),t,e.xValue)),e.yBandwidth(n(e.yScale(),t,e.yValue));else{var a=e.orient&&"horizontal"===e.orient()?e.yScale():e.xScale();e.bandwidth(n(a,t,e.crossValue))}};t instanceof l.selection?t.each(function(t,i,n){a(t),e(l.select(n[i]))}):(a(t),e(t))};return i.rebindAll(r,e),r.widthFraction=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r},e.seriesCanvasArea=function(){var e=f(),t=a.area(),l=function(a){var l=t.context();t.defined(e.defined());var n=a.map(e.values);t.x(function(e,t){return n[t].transposedX}).y(function(e,t){return n[t].transposedY});var r="vertical"===e.orient()?"y":"x";t[r+"0"](function(e,t){return n[t].y0}),t[r+"1"](function(e,t){return n[t].y}),l.beginPath(),l.fillStyle=S.gray,l.strokeStyle="transparent",e.decorate()(l,a),t(a),l.fill(),l.stroke(),l.closePath()};return i.rebindAll(l,e,i.exclude("bandwidth","align")),i.rebind(l,t,"curve","context"),l},e.seriesCanvasBar=function(){var e=f(),t=d.shapeBar().x(0).y(0),a=function(t){return"vertical"===e.orient()?t.height:t.width},l=function(t){return"vertical"===e.orient()?t.width:t.height},n=function(i){var n=t.context(),r=i.filter(e.defined()),d=r.map(e.values);"vertical"===e.orient()?(t.verticalAlign("top"),t.horizontalAlign("center")):(t.horizontalAlign("right"),t.verticalAlign("center")),d.forEach(function(r,d){n.save(),n.beginPath(),n.translate(r.origin[0],r.origin[1]),n.fillStyle=S.darkGray,n.strokeStyle="transparent",e.decorate()(n,r.d,d),a(t)(-r.height),l(t)(r.width),t([r]),n.fill(),n.stroke(),n.closePath(),n.restore()})};return i.rebindAll(n,e),i.rebind(n,t,"context"),n},e.seriesCanvasBoxPlot=function(){var e=k(),t=d.shapeBoxPlot().value(0),a=function(a){var l=a.filter(e.defined()),n=t.context();t.orient(e.orient()),l.forEach(function(a,l){n.save();var i=e.values(a,l);n.translate(i.origin[0],i.origin[1]),n.beginPath(),n.fillStyle=S.gray,n.strokeStyle=S.black,e.decorate()(n,a,l),t.median(i.median).upperQuartile(i.upperQuartile).lowerQuartile(i.lowerQuartile).high(i.high).width(i.width).low(i.low)([a]),n.fill(),n.stroke(),n.closePath(),n.restore()})};return i.rebindAll(a,e),i.rebind(a,t,"cap","context"),a},e.seriesCanvasCandlestick=function(){return V(d.shapeCandlestick())},e.seriesCanvasErrorBar=function(){var e=v(),t=d.shapeErrorBar().value(0),a=function(a){var l=a.filter(e.defined()),n=t.context();t.orient(e.orient()),l.forEach(function(a,l){n.save();var i=e.values(a,l);n.translate(i.origin[0],i.origin[1]),n.beginPath(),n.strokeStyle=S.black,n.fillStyle=S.gray,e.decorate()(n,a,l),t.high(i.high).width(i.width).low(i.low)([a]),n.fill(),n.stroke(),n.closePath(),n.restore()})};return i.rebindAll(a,e),i.rebind(a,t,"context"),a},e.seriesCanvasGrouped=function(e){var t=P(),a=function(a){a.forEach(function(l,n){var r="horizontal"!==e.orient(),d=function(e,l){var i=t.offsetScaleForDatum(a,e,l),d=r?t.xScale():t.yScale();return d(e)+i(n)+i.bandwidth()/2};r?(e.xScale(d),e.yScale(t.yScale())):(e.yScale(d),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth(function(e,l){return t.offsetScaleForDatum(a,e,l).bandwidth()}),e.decorate(function(e,a){return t.decorate()(e,a,n)}),e(l)})};return i.rebindAll(a,e,i.exclude("decorate","xScale","yScale")),i.rebindAll(a,t,i.exclude("offsetScaleForDatum")),a},e.seriesCanvasHeatmap=function(){var e=M(),t=function(t){var a=t.filter(e.defined()),l=e.colorInterpolate(),n=e.colorScale(a),r=e.pathGenerator.context();a.forEach(function(t,a){r.save(),r.beginPath();var i=e.values(t,a);r.translate(i.x,i.y),r.fillStyle=l(n(i.colorValue)),r.strokeStyle="transparent",e.decorate()(r,t,a),e.pathGenerator.height(i.height).width(i.width)([t]),r.fill(),r.stroke(),r.closePath(),r.restore()})};return i.rebind(t,e.pathGenerator,"context"),i.rebindAll(t,e),t},e.seriesCanvasLine=x,e.seriesCanvasMulti=I,e.seriesCanvasOhlc=function(){return V(d.shapeOhlc())},e.seriesCanvasPoint=function(){var e=a.symbol(),t=f(),l=function(a){var l=a.filter(t.defined()),n=e.context();l.forEach(function(a,l){n.save();var i=t.values(a,l);n.translate(i.origin[0],i.origin[1]),n.beginPath(),n.strokeStyle=S.black,n.fillStyle=S.gray,t.decorate()(n,a,l),e(a,l),n.fill(),n.stroke(),n.closePath(),n.restore()})};return i.rebindAll(l,t,i.exclude("baseValue","bandwidth","align")),i.rebind(l,e,"size","type","context"),l},e.seriesCanvasRepeat=T,e.seriesSvgArea=function(){var e=f(),n=a.area(),r=t.dataJoin("path","area"),d=function(t){t.selection&&r.transition(t),n.defined(e.defined()),t.each(function(t,a,i){var d=t.map(e.values);n.x(function(e,t){return d[t].transposedX}).y(function(e,t){return d[t].transposedY});var c="vertical"===e.orient()?"y":"x";n[c+"0"](function(e,t){return d[t].y0}),n[c+"1"](function(e,t){return d[t].y});var s=r(l.select(i[a]),[t]);s.enter().attr("fill",S.gray),s.attr("d",n),e.decorate()(s,t,a)})};return i.rebindAll(d,e,i.exclude("bandwidth","align")),i.rebind(d,r,"key"),i.rebind(d,n,"curve"),d},e.seriesSvgBar=function(){var e=d.shapeBar().x(0).y(0),a=f(),n=t.dataJoin("g","bar"),r=function(e){return"vertical"===a.orient()?e.height:e.width},c=function(e){return"vertical"===a.orient()?e.width:e.height},s=function(e){return"translate("+e[0]+", "+e[1]+")"},o=function(t){t.selection&&n.transition(t),t.each(function(t,i,d){var o=a.orient();if("vertical"!==o&&"horizontal"!==o)throw new Error("The bar series does not support an orientation of "+o);var h=t.filter(a.defined()),u=h.map(a.values);e.width(0).height(0),"vertical"===a.orient()?(e.verticalAlign("top"),e.horizontalAlign("center")):(e.horizontalAlign("right"),e.verticalAlign("center"));var b=n(l.select(d[i]),h);b.enter().attr("transform",function(e,t){return s(u[t].baseOrigin)}).attr("class","bar "+a.orient()).attr("fill",S.darkGray).append("path").attr("d",function(t,a){return c(e)(u[a].width),e([t])}),b.attr("transform",function(e,t){return s(u[t].origin)}).select("path").attr("d",function(t,a){return c(e)(u[a].width),r(e)(-u[a].height),e([t])}),a.decorate()(b,h,i)})};return i.rebindAll(o,a),i.rebind(o,n,"key"),o},e.seriesSvgBoxPlot=function(){var e=k(),a=t.dataJoin("g","box-plot"),n=d.shapeBoxPlot().value(0),r=function(e){return function(t){return e.selection?t.transition(e):t}},c=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},s=function(t){t.selection&&a.transition(t);var s=r(t);t.each(function(t,i,r){var d=t.filter(e.defined()),o=a(l.select(r[i]),d);o.enter().attr("stroke",S.black).attr("fill",S.gray).attr("transform",function(t,a){return c(e.values(t,a))+" scale(1e-6, 1)"}).append("path"),n.orient(e.orient()),o.each(function(t,a,i){var r=e.values(t,a);n.median(r.median).upperQuartile(r.upperQuartile).lowerQuartile(r.lowerQuartile).width(r.width).high(r.high).low(r.low),s(l.select(i[a])).attr("transform",c(r)).select("path").attr("d",n([t]))}),e.decorate()(o,t,i)})};return i.rebindAll(s,e),i.rebind(s,a,"key"),i.rebind(s,n,"cap"),s},e.seriesSvgCandlestick=function(){return m(d.shapeCandlestick(),"candlestick")},e.seriesSvgErrorBar=function(){var e=v(),a=t.dataJoin("g","error-bar"),n=d.shapeErrorBar().value(0),r=function(e){return function(t){return e.selection?t.transition(e):t}},c=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},s=function(t){t.selection&&a.transition(t);var s=r(t);t.each(function(t,i,r){var d=t.filter(e.defined()),o=d.map(e.values),h=a(l.select(r[i]),d);h.enter().attr("stroke",S.black).attr("fill",S.gray).attr("transform",function(t,a){return c(e.values(t,a))+" scale(1e-6, 1)"}).append("path"),n.orient(e.orient()),h.each(function(e,t,a){var i=o[t];n.high(i.high).low(i.low).width(i.width),s(l.select(a[t])).attr("transform",c(i)+" scale(1)").select("path").attr("d",n([e]))}),e.decorate()(h,t,i)})};return i.rebindAll(s,e),i.rebind(s,a,"key"),s},e.seriesSvgGrouped=function(e){var a=P(),n=t.dataJoin("g","grouped"),r=function(t){t.selection&&n.transition(t),t.each(function(t,i,r){var d=n(l.select(r[i]),t);d.enter().append("g"),d.select("g").each(function(i,n,r){var d=l.select(r[n]),c="horizontal"!==e.orient(),s=function(e,l){var i=a.offsetScaleForDatum(t,e,l),r=c?a.xScale():a.yScale();return r(e)+i(n)+i.bandwidth()/2};c?(e.xScale(s),e.yScale(a.yScale())):(e.yScale(s),e.xScale(a.xScale())),e.bandwidth&&e.bandwidth(function(e,l){return a.offsetScaleForDatum(t,e,l).bandwidth()}),e.decorate(function(e,t){return a.decorate()(e,t,n)}),d.call(e)})})};return i.rebindAll(r,e,i.exclude("decorate","xScale","yScale")),i.rebindAll(r,a,i.exclude("offsetScaleForDatum")),r},e.seriesSvgHeatmap=function(){var e=M(),a=t.dataJoin("g","box"),n=function(e){return"translate("+e.x+", "+e.y+")"},r=function(t){t.each(function(t,i,r){var d=t.filter(e.defined()),c=e.colorValue(),s=e.colorInterpolate(),o=e.colorScale(d),h=a(l.select(r[i]),d);h.enter().append("path").attr("stroke","transparent"),h.attr("transform",function(t,a){return n(e.values(t,a))}).select("path").attr("d",function(t,a){return e.pathGenerator.width(e.values(t,a).width).height(e.values(t,a).height)([t])}).attr("fill",function(e,t){return s(o(c(e,t)))}),e.decorate()(h,t,i)})};return i.rebindAll(r,e),r},e.seriesSvgLine=y,e.seriesSvgMulti=B,e.seriesSvgOhlc=function(){return m(d.shapeOhlc(),"ohlc")},e.seriesSvgPoint=function(){var e=a.symbol(),n=f(),r=t.dataJoin("g","point"),c=function(e){return"translate("+e[0]+", "+e[1]+")"},s=function(t){t.selection&&r.transition(t),t.each(function(t,a,i){var d=t.filter(n.defined()),s=r(l.select(i[a]),d);s.enter().attr("transform",function(e,t){return c(n.values(e,t).origin)}).attr("fill",S.gray).attr("stroke",S.black).append("path"),s.attr("transform",function(e,t){return c(n.values(e,t).origin)}).select("path").attr("d",e),n.decorate()(s,t,a)})};return i.rebindAll(s,n,i.exclude("baseValue","bandwidth","align")),i.rebind(s,r,"key"),i.rebind(s,e,"type","size"),s},e.seriesSvgRepeat=function(){var e="vertical",t=y(),a=B(),n=function(i){return i.each(function(i,n,r){"vertical"===e?a.series(i[0].map(function(){return t})).mapping(function(e,t){return e.map(function(e){return e[t]})}):a.series(i.map(function(){return t})).mapping(function(e,t){return e[t]}),l.select(r[n]).call(a)})};return n.series=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],n):t},n.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},i.rebindAll(n,a,i.exclude("series","mapping")),n},e.seriesWebglArea=function(){var e=f(),t=r.webglAdjacentElementAttribute(0,1),a=t.offset(1),l=r.webglAdjacentElementAttribute(0,1),n=l.offset(1),d=r.webglAdjacentElementAttribute(0,1),c=d.offset(1),s=r.webglAdjacentElementAttribute(0,1).type(r.webglTypes.UNSIGNED_BYTE),o=s.offset(1),h=r.webglSeriesArea().crossValueAttribute(t).crossNextValueAttribute(a).mainValueAttribute(l).mainNextValueAttribute(n).baseValueAttribute(d).baseNextValueAttribute(c).definedAttribute(s).definedNextAttribute(o),g=function(){return!1},u=r.webglScaleMapper,b=[],p=null,w=null,S=function(a){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var n=u(e.xScale()),r=u(e.yScale()),c=!g(b,a);c&&(b=a,s.value(function(t,a){return e.defined()(t,a)}).data(a)),(c||n.scale!==p)&&(p=n.scale,t.value(function(t,a){return n.scale(e.crossValue()(t,a))}).data(a)),(c||r.scale!==w)&&(w=r.scale,d.value(function(t,a){return r.scale(e.baseValue()(t,a))}).data(a),l.value(function(t,a){return r.scale(e.mainValue()(t,a))}).data(a)),h.xScale(n.webglScale).yScale(r.webglScale).decorate(function(t){return e.decorate()(t,a,0)}),h(a.length)};return S.equals=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],S):g},S.scaleMapper=function(){return arguments.length?(u=0>=arguments.length?void 0:arguments[0],S):u},i.rebindAll(S,e,i.exclude("bandwidth","align")),i.rebind(S,h,"context"),S},e.seriesWebglBar=function(){var e=f(),t=r.webglElementAttribute(),a=r.webglElementAttribute(),l=r.webglElementAttribute(),n=r.webglElementAttribute().type(r.webglTypes.UNSIGNED_SHORT),d=r.webglElementAttribute().type(r.webglTypes.UNSIGNED_BYTE),c=r.webglSeriesBar().crossValueAttribute(t).mainValueAttribute(a).baseValueAttribute(l).bandwidthAttribute(n).definedAttribute(d),s=function(){return!1},o=r.webglScaleMapper,h=[],g=null,u=null,b=function(i){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var r=o(e.xScale()),b=o(e.yScale()),p=!s(h,i);p&&(h=i,n.value(function(t,a){return e.bandwidth()(t,a)}).data(i),d.value(function(t,a){return e.defined()(t,a)}).data(i)),(p||r.scale!==g)&&(g=r.scale,t.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(i)),(p||b.scale!==u)&&(u=b.scale,l.value(function(t,a){return b.scale(e.baseValue()(t,a))}).data(i),a.value(function(t,a){return b.scale(e.mainValue()(t,a))}).data(i)),c.xScale(r.webglScale).yScale(b.webglScale).decorate(function(t){return e.decorate()(t,i,0)}),c(i.length)};return b.equals=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],b):s},b.scaleMapper=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],b):o},i.rebindAll(b,e,i.exclude("align")),i.rebind(b,c,"context"),b},e.seriesWebglBoxPlot=function(){var e=k(),t=r.webglElementAttribute(),a=r.webglElementAttribute(),l=r.webglElementAttribute(),n=r.webglElementAttribute(),d=r.webglElementAttribute(),c=r.webglElementAttribute(),s=r.webglElementAttribute().type(r.webglTypes.UNSIGNED_SHORT),o=r.webglElementAttribute().type(r.webglTypes.UNSIGNED_SHORT),h=r.webglElementAttribute().type(r.webglTypes.UNSIGNED_BYTE),g=r.webglSeriesBoxPlot().crossValueAttribute(t).highValueAttribute(a).upperQuartileValueAttribute(l).medianValueAttribute(n).lowerQuartileValueAttribute(d).lowValueAttribute(c).bandwidthAttribute(s).capAttribute(o).definedAttribute(h),u=function(){return!1},p=r.webglScaleMapper,w=[],f=null,S=null,y=b(20),x=function(i){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var r=p(e.xScale()),b=p(e.yScale()),x=!u(w,i);x&&(w=i,s.value(function(t,a){return e.bandwidth()(t,a)}).data(i),o.value(function(e,t){return y(e,t)}).data(i),h.value(function(t,a){return e.defined()(t,a)}).data(i)),(x||r.scale!==f)&&(f=r.scale,t.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(i)),(x||b.scale!==S)&&(S=b.scale,a.value(function(t,a){return b.scale(e.highValue()(t,a))}).data(i),l.value(function(t,a){return b.scale(e.upperQuartileValue()(t,a))}).data(i),n.value(function(t,a){return b.scale(e.medianValue()(t,a))}).data(i),d.value(function(t,a){return b.scale(e.lowerQuartileValue()(t,a))}).data(i),c.value(function(t,a){return b.scale(e.lowValue()(t,a))}).data(i)),g.xScale(r.webglScale).yScale(b.webglScale).decorate(function(t){return e.decorate()(t,i,0)}),g(i.length)};return x.cap=function(){return arguments.length?(y=b(0>=arguments.length?void 0:arguments[0]),x):y},x.equals=function(){return arguments.length?(u=0>=arguments.length?void 0:arguments[0],x):u},x.scaleMapper=function(){return arguments.length?(p=0>=arguments.length?void 0:arguments[0],x):p},i.rebindAll(x,e,i.exclude("align")),i.rebind(x,g,"context","lineWidth"),x},e.seriesWebglCandlestick=function(){return E(r.webglSeriesCandlestick())},e.seriesWebglErrorBar=function(){var e=v(),t=r.webglElementAttribute(),a=r.webglElementAttribute(),l=r.webglElementAttribute(),n=r.webglElementAttribute().type(r.webglTypes.UNSIGNED_SHORT),d=r.webglElementAttribute().type(r.webglTypes.UNSIGNED_BYTE),c=r.webglSeriesErrorBar().crossValueAttribute(t).highValueAttribute(a).lowValueAttribute(l).bandwidthAttribute(n).definedAttribute(d),s=function(){return!1},o=r.webglScaleMapper,h=[],g=null,u=null,b=function(i){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var r=o(e.xScale()),b=o(e.yScale()),p=!s(h,i);p&&(h=i,n.value(function(t,a){return e.bandwidth()(t,a)}).data(i),d.value(function(t,a){return e.defined()(t,a)}).data(i)),(p||r.scale!==g)&&(g=r.scale,t.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(i)),(p||b.scale!==u)&&(u=b.scale,a.value(function(t,a){return b.scale(e.highValue()(t,a))}).data(i),l.value(function(t,a){return b.scale(e.lowValue()(t,a))}).data(i)),c.xScale(r.webglScale).yScale(b.webglScale).decorate(function(t){return e.decorate()(t,i,0)}),c(i.length)};return b.equals=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],b):s},b.scaleMapper=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],b):o},i.rebindAll(b,e,i.exclude("align")),i.rebind(b,c,"context","lineWidth"),b},e.seriesWebglLine=function(){var e=f(),t=r.webglAdjacentElementAttribute(-1,2),a=t.offset(-1),l=t.offset(1),n=t.offset(2),d=r.webglAdjacentElementAttribute(-1,2),c=d.offset(-1),s=d.offset(1),o=d.offset(2),h=r.webglAdjacentElementAttribute(0,1).type(r.webglTypes.UNSIGNED_BYTE),g=h.offset(1),u=r.webglSeriesLine().crossPreviousValueAttribute(a).crossValueAttribute(t).crossNextValueAttribute(l).crossNextNextValueAttribute(n).mainPreviousValueAttribute(c).mainValueAttribute(d).mainNextValueAttribute(s).mainNextNextValueAttribute(o).definedAttribute(h).definedNextAttribute(g),b=function(){return!1},p=r.webglScaleMapper,w=[],S=null,y=null,x=function(a){var l=p(e.xScale()),n=p(e.yScale()),r=!b(w,a);r&&(w=a,h.value(function(t,a){return e.defined()(t,a)}).data(a)),(r||l.scale!==S)&&(S=l.scale,"vertical"===e.orient()?t.value(function(t,a){return l.scale(e.crossValue()(t,a))}).data(a):t.value(function(t,a){return l.scale(e.mainValue()(t,a))}).data(a)),(r||n.scale!==y)&&(y=n.scale,"vertical"===e.orient()?d.value(function(t,a){return n.scale(e.mainValue()(t,a))}).data(a):d.value(function(t,a){return n.scale(e.crossValue()(t,a))}).data(a)),u.xScale(l.webglScale).yScale(n.webglScale).decorate(function(t){return e.decorate()(t,a,0)}),u(a.length)};return x.equals=function(){return arguments.length?(b=0>=arguments.length?void 0:arguments[0],x):b},x.scaleMapper=function(){return arguments.length?(p=0>=arguments.length?void 0:arguments[0],x):p},i.rebindAll(x,e,i.exclude("baseValue","bandwidth","align")),i.rebind(x,u,"context","lineWidth"),x},e.seriesWebglMulti=I,e.seriesWebglOhlc=function(){return E(r.webglSeriesOhlc())},e.seriesWebglPoint=function(){var e=f(),t=b(64),l=a.symbolCircle,n=r.webglElementAttribute(),d=r.webglElementAttribute(),c=r.webglElementAttribute().type(r.webglTypes.UNSIGNED_SHORT),s=r.webglElementAttribute().type(r.webglTypes.UNSIGNED_BYTE),o=r.webglSeriesPoint().crossValueAttribute(n).mainValueAttribute(d).sizeAttribute(c).definedAttribute(s),h=function(){return!1},g=r.webglScaleMapper,u=[],p=null,w=null,S=function(a){var b=g(e.xScale()),f=g(e.yScale()),S=!h(u,a);S&&(u=a,c.value(function(e,a){return t(e,a)}).data(a),s.value(function(t,a){return e.defined()(t,a)}).data(a)),(S||b.scale!==p)&&(p=b.scale,"vertical"===e.orient()?n.value(function(t,a){return b.scale(e.crossValue()(t,a))}).data(a):n.value(function(t,a){return b.scale(e.mainValue()(t,a))}).data(a)),(S||f.scale!==w)&&(w=f.scale,"vertical"===e.orient()?d.value(function(t,a){return f.scale(e.mainValue()(t,a))}).data(a):d.value(function(t,a){return f.scale(e.crossValue()(t,a))}).data(a)),o.xScale(b.webglScale).yScale(f.webglScale).type(r.webglSymbolMapper(l)).decorate(function(t){return e.decorate()(t,a,0)}),o(a.length)};return S.size=function(){return arguments.length?(t=b(0>=arguments.length?void 0:arguments[0]),S):t},S.type=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],S):l},S.equals=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],S):h},S.scaleMapper=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],S):g},i.rebindAll(S,e,i.exclude("baseValue","bandwidth","align")),i.rebind(S,o,"context"),S},e.seriesWebglRepeat=T,Object.defineProperty(e,"__esModule",{value:!0})});
